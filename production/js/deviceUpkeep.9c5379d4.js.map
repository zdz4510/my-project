{"version":3,"sources":["webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./src/views/device/pages/device-upkeep.vue?b01a","webpack:///./src/api/device/upkeep.api.js","webpack:///src/views/device/pages/device-upkeep.vue","webpack:///./src/views/device/pages/device-upkeep.vue?e225","webpack:///./src/views/device/pages/device-upkeep.vue","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./src/views/device/pages/device-upkeep.vue?26d7","webpack:///./node_modules/core-js/modules/es.array.concat.js"],"names":["fails","wellKnownSymbol","V8_VERSION","SPECIES","module","exports","METHOD_NAME","array","constructor","foo","Boolean","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","upkeepForm","model","value","callback","$$v","$set","expression","on","handleQuery","_v","handleReset","$event","handleAffirmUpkeep","handleExport","additionalDesRules","staticStyle","tableData","handleSelectionChange","total","pageSize","currentPage","handlePagesize","handleCurrentChange","staticRenderFns","listResourceMaintenanceLogHttp","data","request","get","window","VUE_APP_URL","params","deleteResourceGroupHttp","post","maintenanceDescription","resource","maintenanceStatus","additionalDes","selectionList","created","init","methods","console","log","res","code","message","type","currentChange","pagesize","val","length","forEach","element","Error","$refs","formName","validate","valid","copyList","conditionName","push","obj","$message","component","toPrimitive","definePropertyModule","createPropertyDescriptor","object","key","propertyKey","f","$","isArray","isObject","toObject","toLength","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","i","k","len","E","A","n","arguments","TypeError"],"mappings":"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","file":"js/deviceUpkeep.9c5379d4.js","sourcesContent":["var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"deviceUpkeep\"},[_c('div',{staticClass:\"query\"},[_c('el-form',{ref:\"upkeepForm\",staticClass:\"upkeepForm\",attrs:{\"inline\":true,\"model\":_vm.upkeepForm,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"设备编号\",\"prop\":\"resource\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入设备设备编号\"},model:{value:(_vm.upkeepForm.resource),callback:function ($$v) {_vm.$set(_vm.upkeepForm, \"resource\", $$v)},expression:\"upkeepForm.resource\"}})],1),_c('el-form-item',{attrs:{\"label\":\"保养状态\"}},[_c('el-select',{attrs:{\"placeholder\":\"保养状态\"},model:{value:(_vm.upkeepForm.maintenanceStatus),callback:function ($$v) {_vm.$set(_vm.upkeepForm, \"maintenanceStatus\", $$v)},expression:\"upkeepForm.maintenanceStatus\"}},[_c('el-option',{attrs:{\"label\":\"需要保养\",\"value\":\"需要保养\"}}),_c('el-option',{attrs:{\"label\":\"已保养\",\"value\":\"已保养\"}}),_c('el-option',{attrs:{\"label\":\"暂无需保养\",\"value\":\"暂无需保养\"}}),_c('el-option',{attrs:{\"label\":\"无\",\"value\":\"\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\"},on:{\"click\":_vm.handleQuery}},[_vm._v(\" 查询 \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"info\"},on:{\"click\":_vm.handleReset}},[_vm._v(\" 重置 \")])],1)],1)],1),_c('div',{staticClass:\"operate\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handleAffirmUpkeep('additionalDesRules')}}},[_vm._v(\" 确认保养 \")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"},on:{\"click\":_vm.handleExport}},[_vm._v(\"导出\")]),_c('el-form',{ref:\"additionalDesRules\",staticClass:\"upkeepForm\",attrs:{\"model\":_vm.upkeepForm,\"rules\":_vm.additionalDesRules,\"label-width\":\"180px\"}},[_c('el-form-item',{attrs:{\"label\":\"本次保养附加描述:\",\"prop\":\"additionalDes\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入本次保养附加描述\",\"size\":\"small\"},model:{value:(_vm.upkeepForm.additionalDes),callback:function ($$v) {_vm.$set(_vm.upkeepForm, \"additionalDes\", $$v)},expression:\"upkeepForm.additionalDes\"}})],1)],1)],1),_c('div',{staticClass:\"showInfo\"},[_c('el-table',{ref:\"multipleTable\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"tooltip-effect\":\"dark\",\"height\":\"350px\"},on:{\"selection-change\":_vm.handleSelectionChange}},[_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}),_c('el-table-column',{attrs:{\"prop\":\"resource\",\"label\":\"设备编号\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"conditionName\",\"label\":\"条件名称·\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"workCenterRelation\",\"label\":\"线体\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"station\",\"label\":\"工站\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"workCenter\",\"label\":\"工作中心\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"maintenanceStatus\",\"label\":\"保养状态\",\"width\":\"100\"}}),_c('el-table-column',{attrs:{\"prop\":\"maintenanceEndTime\",\"label\":\"最后保养时间\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"prop\":\"maintenanceUserId\",\"label\":\"最后保养人\",\"width\":\"120\"}}),_c('el-table-column',{attrs:{\"prop\":\"additionalDes\",\"label\":\"附加描述\",\"show-overflow-tooltip\":\"\"}})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"layout\":\"->,total,prev,pager,next,sizes\",\"total\":_vm.total,\"page-size\":_vm.pageSize,\"page-sizes\":[5, 10, 15, 20],\"current-page\":_vm.currentPage},on:{\"size-change\":_vm.handlePagesize,\"current-change\":_vm.handleCurrentChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import request from \"@/service/\";\r\n// // import {VUE_APP_URL} from '@/config'\r\n\r\n/**\r\n * 根据设备编码，保养状态查询设备保养配置\r\n *  url /mes/resourceMaintenanceLog/listResourceMaintenanceLog\r\n */\r\nexport const listResourceMaintenanceLogHttp = data => {\r\n  return request.get(\r\n    `${window.VUE_APP_URL}/mes/resourceMaintenanceLog/listResourceMaintenanceLog`,\r\n    {\r\n      params: data\r\n    }\r\n  );\r\n};\r\n\r\n/**\r\n * 导出设备保养作业Excel\r\n *  url /mes/resourceMaintenanceLog/exportExcel\r\n */\r\nexport const exportExcelHttp = data => {\r\n  return request.get(\r\n    `${window.VUE_APP_URL}/mes/resourceMaintenanceLog/exportExcel`,\r\n    {\r\n      params: data\r\n    }\r\n  );\r\n};\r\n\r\n/**\r\n * 批量确认保养\r\n *  url /mes/resourceMaintenanceLog/listConfirmService\r\n */\r\nexport const deleteResourceGroupHttp = data => {\r\n  return request.post(\r\n    `${window.VUE_APP_URL}/mes/resourceMaintenanceLog/listConfirmService?maintenanceDescription=${data.maintenanceDescription}`,\r\n    data.data\r\n  );\r\n};\r\n","<template>\r\n  <div class=\"deviceUpkeep\">\r\n    <div class=\"query\">\r\n      <!-- <div class=\"left\"> -->\r\n      <el-form\r\n        :inline=\"true\"\r\n        :model=\"upkeepForm\"\r\n        ref=\"upkeepForm\"\r\n        label-width=\"100px\"\r\n        class=\"upkeepForm\"\r\n      >\r\n        <el-form-item label=\"设备编号\" prop=\"resource\">\r\n          <el-input\r\n            v-model=\"upkeepForm.resource\"\r\n            placeholder=\"请输入设备设备编号\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"保养状态\">\r\n          <el-select\r\n            v-model=\"upkeepForm.maintenanceStatus\"\r\n            placeholder=\"保养状态\"\r\n          >\r\n            <el-option label=\"需要保养\" value=\"需要保养\"></el-option>\r\n            <el-option label=\"已保养\" value=\"已保养\"></el-option>\r\n            <el-option label=\"暂无需保养\" value=\"暂无需保养\"></el-option>\r\n            <el-option label=\"无\" value=\"\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button size=\"small\" type=\"warning\" @click=\"handleQuery\">\r\n            查询\r\n          </el-button>\r\n          <el-button size=\"small\" type=\"info\" @click=\"handleReset\">\r\n            重置\r\n          </el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"operate\">\r\n      <el-button\r\n        size=\"small\"\r\n        type=\"success\"\r\n        @click=\"handleAffirmUpkeep('additionalDesRules')\"\r\n      >\r\n        确认保养\r\n      </el-button>\r\n      <el-button size=\"small\" type=\"primary\" @click=\"handleExport\"\r\n        >导出</el-button\r\n      >\r\n      <el-form\r\n        :model=\"upkeepForm\"\r\n        :rules=\"additionalDesRules\"\r\n        ref=\"additionalDesRules\"\r\n        label-width=\"180px\"\r\n        class=\"upkeepForm\"\r\n      >\r\n        <el-form-item label=\"本次保养附加描述:\" prop=\"additionalDes\">\r\n          <el-input\r\n            v-model=\"upkeepForm.additionalDes\"\r\n            placeholder=\"请输入本次保养附加描述\"\r\n            size=\"small\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </div>\r\n    <div class=\"showInfo\">\r\n      <el-table\r\n        ref=\"multipleTable\"\r\n        :data=\"tableData\"\r\n        tooltip-effect=\"dark\"\r\n        style=\"width: 100%\"\r\n        height=\"350px\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\"> </el-table-column>\r\n        <el-table-column prop=\"resource\" label=\"设备编号\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"conditionName\" label=\"条件名称·\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"workCenterRelation\" label=\"线体\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"station\" label=\"工站\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"workCenter\" label=\"工作中心\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column prop=\"maintenanceStatus\" label=\"保养状态\" width=\"100\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"maintenanceEndTime\"\r\n          label=\"最后保养时间\"\r\n          width=\"160\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"maintenanceUserId\"\r\n          label=\"最后保养人\"\r\n          width=\"120\"\r\n        >\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"additionalDes\"\r\n          label=\"附加描述\"\r\n          show-overflow-tooltip\r\n        >\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        background\r\n        layout=\"->,total,prev,pager,next,sizes\"\r\n        :total=\"total\"\r\n        :page-size=\"pageSize\"\r\n        :page-sizes=\"[5, 10, 15, 20]\"\r\n        :current-page=\"currentPage\"\r\n        @size-change=\"handlePagesize\"\r\n        @current-change=\"handleCurrentChange\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  listResourceMaintenanceLogHttp,\r\n  deleteResourceGroupHttp\r\n} from \"@/api/device/upkeep.api.js\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      upkeepForm: {\r\n        resource: \"\",\r\n        maintenanceStatus: \"\",\r\n        additionalDes: \"\"\r\n      },\r\n      // resourceRules: {\r\n      //   resource: [\r\n      //     { required: true, message: \"请输入设备编号\", trigger: \"blur\" }\r\n      //   ]\r\n      //   // describe: [\r\n      //   //   { required: true, message: \"请输入本次保养附加描述\", trigger: \"blur\" }\r\n      //   // ]\r\n      // },\r\n      additionalDesRules: {\r\n        additionalDes: [\r\n          { required: true, message: \"请输入本次保养附加描述\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      tableData: [],\r\n      pageSize: 10,\r\n      currentPage: 1,\r\n      total: 0,\r\n      selectionList: []\r\n    };\r\n  },\r\n  created() {\r\n    this.init();\r\n  },\r\n  methods: {\r\n    init() {\r\n      const data = {\r\n        currentPage: this.currentPage,\r\n        pageSize: this.pageSize,\r\n        resource: this.upkeepForm.resource\r\n      };\r\n      listResourceMaintenanceLogHttp(data).then(data => {\r\n        const res = data.data;\r\n        const list = res.data.data;\r\n        console.log(res.data.total);\r\n        if (res.code === 200) {\r\n          this.tableData = list;\r\n          this.total = res.data.total;\r\n          return;\r\n        }\r\n        this.$message({\r\n          message: res.message,\r\n          type: \"warning\"\r\n        });\r\n      });\r\n    },\r\n    //更改当前页码,再次请求数据\r\n    handleCurrentChange(currentChange) {\r\n      this.currentPage = currentChange;\r\n      this.init();\r\n    },\r\n    //更改页码大小\r\n    handlePagesize(pagesize) {\r\n      this.pageSize = pagesize;\r\n      this.currentPage = 1;\r\n      this.init();\r\n    },\r\n    handleQuery() {\r\n      this.init();\r\n    },\r\n    handleReset() {\r\n      this.upkeepForm.resource = \"\";\r\n      this.upkeepForm.maintenanceStatus = \"\";\r\n      this.upkeepForm.additionalDes = \"\";\r\n    },\r\n    handleSelectionChange(val) {\r\n      this.selectionList = val;\r\n    },\r\n    //确认保养\r\n    handleAffirmUpkeep(formName) {\r\n      console.log(111);\r\n      if (this.selectionList.length === 0) {\r\n        this.$message({\r\n          message: \"你还未选择项哦\",\r\n          type: \"warning\"\r\n        });\r\n        return;\r\n      }\r\n      this.selectionList.forEach(element => {\r\n        if (element.maintenanceStatus === \"已保养\") {\r\n          this.$message({\r\n            message: \"不能保养已保养的设备\",\r\n            type: \"warning\"\r\n          });\r\n          //满足情况则抛出错误结束\r\n          throw Error();\r\n        }\r\n      });\r\n      this.$refs[formName].validate(valid => {\r\n        if (valid) {\r\n          const data = [];\r\n          const copyList = JSON.parse(JSON.stringify(this.selectionList));\r\n          copyList.forEach(element => {\r\n            const obj = {\r\n              conditionName: element.conditionName,\r\n              resource: element.resource\r\n            };\r\n            data.push(obj);\r\n          });\r\n          deleteResourceGroupHttp({\r\n            data: data,\r\n            maintenanceDescription: this.upkeepForm.additionalDes\r\n          }).then(data => {\r\n            const res = data.data;\r\n            console.log(res);\r\n            if (res.code === 200) {\r\n              this.$message({\r\n                message: res.message,\r\n                type: \"success\"\r\n              });\r\n              this.handleReset();\r\n              this.init();\r\n              return;\r\n            }\r\n            this.$message({\r\n              message: res.message,\r\n              type: \"warning\"\r\n            });\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    handleExport() {}\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.deviceUpkeep {\r\n  padding: 0 30px;\r\n  .operate {\r\n    padding: 10px 5px;\r\n    display: flex;\r\n    .el-form-item {\r\n      margin-bottom: 0px;\r\n    }\r\n  }\r\n  .query {\r\n    height: 40px;\r\n    padding: 10px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    .left {\r\n      width: 300px;\r\n    }\r\n    .middle {\r\n      padding: 0 20px;\r\n    }\r\n    .right {\r\n      width: 480px;\r\n      padding: 5px 30px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./device-upkeep.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./device-upkeep.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./device-upkeep.vue?vue&type=template&id=86a335fc&\"\nimport script from \"./device-upkeep.vue?vue&type=script&lang=js&\"\nexport * from \"./device-upkeep.vue?vue&type=script&lang=js&\"\nimport style0 from \"./device-upkeep.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./device-upkeep.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./device-upkeep.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  concat: function concat(arg) { // eslint-disable-line no-unused-vars\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n"],"sourceRoot":""}