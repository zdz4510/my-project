(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dc-search"],{"0752":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-bar"},[a("el-form",{ref:"searchForm",staticClass:"form-style",attrs:{inline:!0,model:e.searchForm,rules:e.rules,"label-width":e.formLabelWidth}},[a("el-form-item",{attrs:{label:"物料号/工单号/工序设备ID:",prop:"resource"}},[a("el-input",{model:{value:e.searchForm.resource,callback:function(t){e.$set(e.searchForm,"resource",t)},expression:"searchForm.resource"}})],1),a("el-form-item",{attrs:{label:"收集类型:",prop:"collectionType",required:""}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:e.searchForm.collectionType,callback:function(t){e.$set(e.searchForm,"collectionType",t)},expression:"searchForm.collectionType"}},e._l(e.collectionType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"数据收集组名称:",prop:"dcGroup"}},[a("el-input",{model:{value:e.searchForm.dcGroup,callback:function(t){e.$set(e.searchForm,"dcGroup",t)},expression:"searchForm.dcGroup"}})],1),a("el-form-item",{attrs:{label:"",prop:""}},[a("el-button",{staticClass:"mr25 pad1025",attrs:{size:"small",type:"success"},on:{click:e.search}},[e._v("查询")]),a("el-button",{staticClass:"mr25 pad1025",attrs:{size:"small",type:"warning"},on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("重置")])],1)],1)],1),a("div",{staticClass:"operate ml30 mtb10"},[a("el-button",{staticClass:"mr25 pad1025",attrs:{size:"small",type:"danger",disabled:0===this.checkedList.length},on:{click:e.del}},[e._v("删除")]),a("el-button",{staticClass:"mr25 pad1025",attrs:{size:"small",type:"danger",disabled:!this.show},on:{click:e.exportExcel}},[e._v("导出")])],1),this.show?e._e():a("div",{},[a("el-table",{ref:"multipleTable",attrs:{data:this.tableData.data,"tooltip-effect":"dark","row-key":"mat"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),a("el-table-column",{attrs:{prop:"dcGroup",label:"数据收集组"}}),a("el-table-column",{attrs:{prop:"collectionType",label:"收集类型"}}),a("el-table-column",{attrs:{prop:"resourceGroup",label:"设备组"}}),a("el-table-column",{attrs:{prop:"resource",label:"设备编号"}}),a("el-table-column",{attrs:{prop:"mat",label:"物料号"}}),a("el-table-column",{attrs:{prop:"matGroup",label:"物料组"}}),a("el-table-column",{attrs:{prop:"shopOrder",label:"工单号"}}),a("el-table-column",{attrs:{prop:"workCenter",label:"工作中心"}}),a("el-table-column",{attrs:{prop:"operation",label:"工序"}}),a("el-table-column",{attrs:{prop:"testPass",label:"校验结果"}}),a("el-table-column",{attrs:{prop:"createUserName",label:"创建人"}}),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}})],1),a("el-pagination",{staticClass:"mtb20",attrs:{background:"","current-page":this.page.currentPage,"page-sizes":[1,10,15,20,30,50],"page-size":this.page.pageSize,layout:"->, total, prev, pager, next, sizes, jumper",total:this.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),this.show?a("div",[a("el-table",{attrs:{border:"",data:e.tableParamsData.data,"row-key":"mat"},on:{"selection-change":e.handleSelectionChange2}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._l(e.tableParamsData.tableHead,(function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.column_name,label:e.column_comment}})]}))],2),a("el-pagination",{staticClass:"mtb20",attrs:{background:"","current-page":this.page.currentPage,"page-sizes":[1,10,15,20,30,50],"page-size":this.page.pageSize,layout:"->, total, prev, pager, next, sizes, jumper",total:this.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()])},o=[],n=(a("99af"),a("841c"),a("159b"),a("8e44")),l=function(e){return n["a"].post("".concat(window.VUE_APP_URL,"/mes/dcDataReport/findDcDataPage?currentPage=").concat(e.currentPage,"&pageSize=").concat(e.pageSize),e)},c=function(e){return n["a"].delete("".concat(window.VUE_APP_URL,"/mes/dcDataReport/deleteDcDataBatch"),{data:e})},s={name:"dc-search",data:function(){return{show:!0,checkedList:[],formLabelWidth:"200px",searchForm:{resource:"设备",dcGroup:"",collectionType:20,tenantSiteCode:"test"},rules:{},collectionType:[{value:10,label:"工单"},{value:20,label:"物料"},{value:30,label:"资源"},{value:40,label:"工序"}],tableData:{data:[]},tableParamsData:{data:[],tableHead:[]},page:{currentPage:1,pageSize:10,total:0}}},created:function(){this.search()},methods:{search:function(){var e=this,t={tenantSiteCode:this.searchForm.tenantSiteCode,resource:this.searchForm.resource,dcGroup:this.searchForm.dcGroup,collectionType:this.searchForm.collectionType,pageSize:this.page.pageSize,currentPage:this.page.currentPage};l(t).then((function(t){if(e.show=t.data.data.isShowParamPage,e.show){var a=[{column_name:"collectionType",column_comment:"收集类型"},{column_name:"dcGroup",column_comment:"数据收集名称"}];t.data.data.dcParamColumnHead.forEach((function(e){var t={};t.column_name=e,t.column_comment=e,a.push(t)})),console.log(a,"tableHead"),e.tableParamsData.data=t.data.data.dcParamPage.data,e.tableParamsData.tableHead=a,e.page.total=t.data.data.dcParamPage.total}else e.tableData.data=t.data.data.dcDataPage.data,e.page.total=t.data.data.dcDataPage.total}))},handleSizeChange:function(e){console.log(e),this.page.pageSize=e,this.search()},handleCurrentChange:function(e){this.page.currentPage=e,this.search()},handleSelectionChange:function(e){this.checkedList=e,console.log(e)},handleSelectionChange2:function(e){this.checkedList=e,console.log(e)},del:function(){var e=this;this.$confirm("是否删除所选数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e.checkedList).then((function(t){console.log(t,"adddata"),e.$message({type:"success",message:"删除成功!"}),e.search()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},add:function(){this.$router.push({path:"/material/add-material"})},edit:function(){this.$router.push({path:"/material/add-material"})},submitForm:function(e){this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;console.log("submit!")}))},resetForm:function(e){this.$refs[e].resetFields(),this.search()},exportExcel:function(){var e=this.searchForm;window.location.href="".concat(window.VUE_APP_URL,"/mes/dcDataReport/exportExcel?collectionType=").concat(e.collectionType,"&dcGroup=").concat(e.dcGroup,"&resource=").concat(e.resource,"&tenantSiteCode=").concat(e.tenantSiteCode)}}},i=s,u=(a("1d13"),a("2877")),d=Object(u["a"])(i,r,o,!1,null,"bca8ec46",null);t["default"]=d.exports},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"1d13":function(e,t,a){"use strict";var r=a("8b42"),o=a.n(r);o.a},"1dde":function(e,t,a){var r=a("d039"),o=a("b622"),n=a("60ae"),l=o("species");e.exports=function(e){return n>=51||!r((function(){var t=[],a=t.constructor={};return a[l]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8418:function(e,t,a){"use strict";var r=a("c04e"),o=a("9bf2"),n=a("5c6c");e.exports=function(e,t,a){var l=r(t);l in e?o.f(e,l,n(0,a)):e[l]=a}},"841c":function(e,t,a){"use strict";var r=a("d784"),o=a("825a"),n=a("1d80"),l=a("129f"),c=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=n(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var n=o(e),s=String(this),i=n.lastIndex;l(i,0)||(n.lastIndex=0);var u=c(n,s);return l(n.lastIndex,i)||(n.lastIndex=i),null===u?-1:u.index}]}))},"8b42":function(e,t,a){},"99af":function(e,t,a){"use strict";var r=a("23e7"),o=a("d039"),n=a("e8b5"),l=a("861d"),c=a("7b0b"),s=a("50c4"),i=a("8418"),u=a("65f0"),d=a("1dde"),p=a("b622"),h=a("60ae"),m=p("isConcatSpreadable"),b=9007199254740991,f="Maximum allowed index exceeded",g=h>=51||!o((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!l(e))return!1;var t=e[m];return void 0!==t?!!t:n(e)},w=!g||!v;r({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,r,o,n,l=c(this),d=u(l,0),p=0;for(t=-1,r=arguments.length;t<r;t++)if(n=-1===t?l:arguments[t],y(n)){if(o=s(n.length),p+o>b)throw TypeError(f);for(a=0;a<o;a++,p++)a in n&&i(d,p,n[a])}else{if(p>=b)throw TypeError(f);i(d,p++,n)}return d.length=p,d}})}}]);
//# sourceMappingURL=dc-search.e9e1d397.js.map