(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["deviceUpkeep"],{"1dde":function(e,t,a){var n=a("d039"),i=a("b622"),r=a("60ae"),o=i("species");e.exports=function(e){return r>=51||!n((function(){var t=[],a=t.constructor={};return a[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"493b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deviceUpkeep"},[a("div",{staticClass:"query"},[a("el-form",{ref:"upkeepForm",staticClass:"upkeepForm",attrs:{inline:!0,model:e.upkeepForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"设备编号",prop:"resource"}},[a("el-input",{attrs:{placeholder:"请输入设备设备编号"},model:{value:e.upkeepForm.resource,callback:function(t){e.$set(e.upkeepForm,"resource",t)},expression:"upkeepForm.resource"}})],1),a("el-form-item",{attrs:{label:"保养状态"}},[a("el-select",{attrs:{placeholder:"保养状态"},model:{value:e.upkeepForm.maintenanceStatus,callback:function(t){e.$set(e.upkeepForm,"maintenanceStatus",t)},expression:"upkeepForm.maintenanceStatus"}},[a("el-option",{attrs:{label:"需要保养",value:"需要保养"}}),a("el-option",{attrs:{label:"已保养",value:"已保养"}}),a("el-option",{attrs:{label:"暂无需保养",value:"暂无需保养"}}),a("el-option",{attrs:{label:"无",value:""}})],1)],1),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.handleQuery}},[e._v(" 查询 ")]),a("el-button",{attrs:{size:"small",type:"info"},on:{click:e.handleReset}},[e._v(" 重置 ")])],1)],1)],1),a("div",{staticClass:"operate"},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){return e.handleAffirmUpkeep("additionalDesRules")}}},[e._v(" 确认保养 ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleExport}},[e._v("导出")]),a("el-form",{ref:"additionalDesRules",staticClass:"upkeepForm",attrs:{model:e.upkeepForm,rules:e.additionalDesRules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:"本次保养附加描述:",prop:"additionalDes"}},[a("el-input",{attrs:{placeholder:"请输入本次保养附加描述",size:"small"},model:{value:e.upkeepForm.additionalDes,callback:function(t){e.$set(e.upkeepForm,"additionalDes",t)},expression:"upkeepForm.additionalDes"}})],1)],1)],1),a("div",{staticClass:"showInfo"},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark",height:"350px"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{prop:"resource",label:"设备编号",width:"100"}}),a("el-table-column",{attrs:{prop:"conditionName",label:"条件名称·",width:"100"}}),a("el-table-column",{attrs:{prop:"workCenterRelation",label:"线体",width:"100"}}),a("el-table-column",{attrs:{prop:"station",label:"工站",width:"100"}}),a("el-table-column",{attrs:{prop:"workCenter",label:"工作中心",width:"100"}}),a("el-table-column",{attrs:{prop:"maintenanceStatus",label:"保养状态",width:"100"}}),a("el-table-column",{attrs:{prop:"maintenanceEndTime",label:"最后保养时间",width:"160"}}),a("el-table-column",{attrs:{prop:"maintenanceUserId",label:"最后保养人",width:"120"}}),a("el-table-column",{attrs:{prop:"additionalDes",label:"附加描述","show-overflow-tooltip":""}})],1),a("el-pagination",{attrs:{background:"",layout:"->,total,prev,pager,next,sizes",total:e.total,"page-size":e.pageSize,"page-sizes":[5,10,15,20],"current-page":e.currentPage},on:{"size-change":e.handlePagesize,"current-change":e.handleCurrentChange}})],1)])},i=[],r=(a("159b"),a("99af"),a("8e44")),o=function(e){return r["a"].get("".concat(window.VUE_APP_URL,"/mes/resourceMaintenanceLog/listResourceMaintenanceLog"),{params:e})},s=function(e){return r["a"].post("".concat(window.VUE_APP_URL,"/mes/resourceMaintenanceLog/listConfirmService?maintenanceDescription=").concat(e.maintenanceDescription),e.data)},l={data:function(){return{upkeepForm:{resource:"",maintenanceStatus:"",additionalDes:""},additionalDesRules:{additionalDes:[{required:!0,message:"请输入本次保养附加描述",trigger:"blur"}]},tableData:[],pageSize:10,currentPage:1,total:0,selectionList:[]}},created:function(){this.init()},methods:{init:function(){var e=this,t={currentPage:this.currentPage,pageSize:this.pageSize,resource:this.upkeepForm.resource};o(t).then((function(t){var a=t.data,n=a.data.data;if(console.log(a.data.total),200===a.code)return e.tableData=n,void(e.total=a.data.total);e.$message({message:a.message,type:"warning"})}))},handleCurrentChange:function(e){this.currentPage=e,this.init()},handlePagesize:function(e){this.pageSize=e,this.currentPage=1,this.init()},handleQuery:function(){this.init()},handleReset:function(){this.upkeepForm.resource="",this.upkeepForm.maintenanceStatus="",this.upkeepForm.additionalDes=""},handleSelectionChange:function(e){this.selectionList=e},handleAffirmUpkeep:function(e){var t=this;console.log(111),0!==this.selectionList.length?(this.selectionList.forEach((function(e){if("已保养"===e.maintenanceStatus)throw t.$message({message:"不能保养已保养的设备",type:"warning"}),Error()})),this.$refs[e].validate((function(e){if(!e)return!1;var a=[],n=JSON.parse(JSON.stringify(t.selectionList));n.forEach((function(e){var t={conditionName:e.conditionName,resource:e.resource};a.push(t)})),s({data:a,maintenanceDescription:t.upkeepForm.additionalDes}).then((function(e){var a=e.data;if(console.log(a),200===a.code)return t.$message({message:a.message,type:"success"}),t.handleReset(),void t.init();t.$message({message:a.message,type:"warning"})}))}))):this.$message({message:"你还未选择项哦",type:"warning"})},handleExport:function(){}}},c=l,u=(a("8e52"),a("2877")),p=Object(u["a"])(c,n,i,!1,null,null,null);t["default"]=p.exports},"80e6":function(e,t,a){},8418:function(e,t,a){"use strict";var n=a("c04e"),i=a("9bf2"),r=a("5c6c");e.exports=function(e,t,a){var o=n(t);o in e?i.f(e,o,r(0,a)):e[o]=a}},"8e52":function(e,t,a){"use strict";var n=a("80e6"),i=a.n(n);i.a},"99af":function(e,t,a){"use strict";var n=a("23e7"),i=a("d039"),r=a("e8b5"),o=a("861d"),s=a("7b0b"),l=a("50c4"),c=a("8418"),u=a("65f0"),p=a("1dde"),d=a("b622"),m=a("60ae"),f=d("isConcatSpreadable"),h=9007199254740991,g="Maximum allowed index exceeded",b=m>=51||!i((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),v=p("concat"),k=function(e){if(!o(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},w=!b||!v;n({target:"Array",proto:!0,forced:w},{concat:function(e){var t,a,n,i,r,o=s(this),p=u(o,0),d=0;for(t=-1,n=arguments.length;t<n;t++)if(r=-1===t?o:arguments[t],k(r)){if(i=l(r.length),d+i>h)throw TypeError(g);for(a=0;a<i;a++,d++)a in r&&c(p,d,r[a])}else{if(d>=h)throw TypeError(g);c(p,d++,r)}return p.length=d,p}})}}]);
//# sourceMappingURL=deviceUpkeep.9c5379d4.js.map